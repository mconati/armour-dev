import armour_main_pybind
import numpy as np

obstacles = np.array(
[[0.3640900000, 0.3624400000 , 0.3379100000 , 0.1957800000 , 0.0000000000 , 0.0000000000 , 0.0000000000, 0.2110350000, 0.0000000000, 0.0000000000, 0.0000000000, 0.2226600000],
[0.3441300000, -0.0166370000,  0.3891200000,  0.0466220000,  0.0000000000,  0.0000000000,  0.0000000000, 0.0641950000 ,0.0000000000 ,0.0000000000, 0.0000000000, 0.2270200000],
[-0.0366870000, 0.2144200000 , 0.2779500000 , 0.0514800000 , 0.0000000000 , 0.0000000000 , 0.0000000000, 0.0383190000, 0.0000000000, 0.0000000000, 0.0000000000, 0.1636200000],
[-0.0251560000, -0.3598300000,  0.3536500000,  0.0293815000,  0.0000000000,  0.0000000000,  0.0000000000 ,0.0317925000, 0.0000000000, 0.0000000000, 0.0000000000 ,0.0804850000],
[0.3348300000, -0.1838900000,  0.3544600000,  0.1012850000,  0.0000000000,  0.0000000000,  0.0000000000, 0.0102430000, 0.0000000000, 0.0000000000, 0.0000000000, 0.2415650000],
[0.0361770000, 0.3760600000 , 0.3726100000 , 0.0675900000 , 0.0000000000 , 0.0000000000 , 0.0000000000, 0.0696650000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0689800000],
[0.3246100000, -0.3509700000,  0.3458400000,  0.0237970000,  0.0000000000,  0.0000000000,  0.0000000000, 0.0938850000, 0.0000000000, 0.0000000000, 0.0000000000, 0.0182330000],
[0.3108100000, -0.3782200000,  0.2593900000,  0.1348600000,  0.0000000000,  0.0000000000,  0.0000000000 ,0.1230100000, 0.0000000000, 0.0000000000 ,0.0000000000 ,0.0098505000],
[0.1988300000, 0.0630410000 , 0.2556300000 , 0.0084185000 , 0.0000000000 , 0.0000000000 , 0.0000000000, 0.0318990000, 0.0000000000, 0.0000000000 ,0.0000000000 ,0.1245700000]])
planner = armour_main_pybind.pzsparse(obstacles)
num_obs = planner.getNumObstacles()
print(f'Number of Obstacles: {num_obs}')

q0 = np.array([0.6543, -0.0876, -0.4837, -1.2278, -1.5735, -1.0720, 0])
# q0 = np.zeros(7)
qd0 = np.zeros(7)
qdd0 = np.zeros(7)
goal = np.array([0.6831, 0.009488, -0.2471, -0.9777, -1.414, -0.9958, 0])
# goal = np.zeros(7)
k = planner.optimize(q0, qd0, qdd0, goal)
qdes = planner.getDesTraj(q0, qd0, qdd0, k, 0.5)
print(f'qdes: {qdes.reshape(7,3)}')
breakpoint()
del planner
